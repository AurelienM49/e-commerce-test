{% extends 'base.html.twig' %}

{% block title %}EASY - Mon panier {% endblock %}

{% block body %}
    <main class="main">
      <!-- Breadcrumb Start -->
      <div class="breadcrumb-wrap">
        <div class="banner">
          <img class="bg-img bg-top" src="../assets/images/inner-page/banner-p.jpg" alt="banner" />

          <div class="container-lg">
            <div class="breadcrumb-box">
              <div class="heading-box">
                <h1>Cart</h1>
              </div>
              <ol class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li>
                  <a href="javascript:void(0)"><i data-feather="chevron-right"></i></a>
                </li>
                <li><a href="shop-left-sidebar.html">Shop</a></li>
                <li>
                  <a href="javascript:void(0)"><i data-feather="chevron-right"></i></a>
                </li>
                <li class="current"><a href="cart.html">Cart</a></li>
              </ol>
            </div>
          </div>
        </div>
      </div>
      <!-- Breadcrumb End -->

      <!-- Cart Section Start -->
      <section class="section-b-space card-page">
        <div class="container-lg">
          <div class="row g-3 g-md-4 cart">
            <div class="col-md-7 col-lg-8">
              <div class="cart-wrap">
                <div class="items-list">
                  <table class="table cart-table m-md-0">
                    <thead>
                      <tr>
                        <th class="d-none d-sm-table-cell">PRODUCT</th>
                        <th class="d-none d-sm-table-cell">PRICE</th>
                        <th class="d-none d-lg-table-cell">QUANTITY</th>
                        <th class="d-none d-xl-table-cell">TOTAL</th>
                      </tr>
                    </thead>

                    <tbody>
                    {% set total = null %}
                    {% for product in cart %}
                      <tr>
                        <td>
                          <div class="product-detail">
                            <img class="pr-img" src="../assets/images/fashion/product/front/8.jpg" alt="image" />
                            <div class="details">
                              <h4 class="title-color font-default2">{{product.product.name}}</h4>
                              <span class="sold-by">Sold By : <span>Easy Group</span></span>
                              <span class="size gap-2 d-flex d-sm-none">Prix : <span>{{ (product.product.price / 100)|number_format(2,',','.') }} €</span> </span>
                              <div class="plus-minus mt-2 d-inline-flex d-lg-none">
                                <i class="sub" data-feather="minus"></i>
                                <input type="number" value="1" min="1" max="10" />
                                <i class="add" data-feather="plus"></i>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td class="price d-none d-sm-table-cell">{{ (product.product.price / 100)|number_format(2,',','.') }} €</td>
                        <td class="d-none d-lg-table-cell">
                          <div class="plus-minus">
                            <i class="sub" data-feather="minus"></i>
                            <input type="number" value="{{ product.quantity }}" min="1" max="10" />
                            <i class="add" data-feather="plus"></i>
                          </div>
                        </td>
                        <td class="total d-none d-xl-table-cell">{{ ((product.product.price * product.quantity) / 100)|number_format(2,',','.') }} €</td>
                      </tr>
                      {% set total = total + (product.product.price * product.quantity) %}
                  {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="col-md-5 col-lg-4">
              <div class="summery-wrap">
                <div class="cart-wrap grand-total-wrap">
                  <div>
                    <div class="order-summery-box">
                      <h5 class="cart-title">Détails ({{ cart|length }} Items)</h5>
                      <ul class="order-summery">
                        <li>
                          <span>Total HT</span>
                          <span> {{ (total / 100)|number_format(2,',','.') }} € </span>
                        </li>
                        <li>
                          <span>Frais de transports</span>
                          <span>25,00 €</span>
                        </li>
                        <li>
                          <span>TVA (20 %)</span>
                          <span>{{ ((total / 100) * 0.20 )|number_format(2,',','.') }} €</span>
                        </li>
                        {% set total = total + (total * 0.20) %}
                        <li class="pb-0">
                          <span>Total TTC</span>
                          <span>{{ (((total + 2500.00) / 100)|number_format(2,',','.'))  }} €</span>
                        </li>
                      </ul>
                      <div class="row g-3 mt-2">
                        <div class="col-6 col-md-12">
                          <a href="address.html" class="btn-solid checkout-btn">Checkout <i class="arrow"></i></a>
                        </div>
                        <div class="col-6 col-md-12">
                          <a href="shop-left-sidebar.html" class="btn-outline w-100 justify-content-center checkout-btn"> Back To Shop </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Cart Section End -->
    </main>
{% endblock %}
